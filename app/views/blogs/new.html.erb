<div class="body-bg">
  <div class="page-nav" style="margin:16px 0;">
    <%= link_to "„Éû„Ç§„Éö„Éº„Ç∏„Å∏", user_path(current_user) %>
  </div>

  <!-- ‚úÖ Ê§úÁ¥¢ + ÊäïÁ®øÁµ±Âêà„Éï„Ç©„Éº„É† -->
<%= form_with url: new_blog_path, method: :get, local: true do %>
  <h2>„Çø„Ç∞„ÇíÊ§úÁ¥¢</h2>
  <%= text_field_tag :keyword, params[:keyword], placeholder: "„Çø„Ç∞Âêç„ÇíÂÖ•Âäõ" %>

  <!-- üîÅ ÈÅ∏ÊäûÊ∏à„Åø„Çø„Ç∞ID„Çí hidden_field „Å®„Åó„Å¶ÈÄÅ‰ø° -->
  <% Array(@blog.tag_ids).each do |tag_id| %>
    <%= hidden_field_tag "blog[tag_ids][]", tag_id %>
  <% end %>

  <%= submit_tag "Ê§úÁ¥¢" %>
<% end %>


  <!-- ‚úçÔ∏è ÊäïÁ®ø„Éï„Ç©„Éº„É† -->
  <%= form_with model: @blog, local: true do |form| %>
    <h2>„Çø„Ç∞„ÇíÈÅ∏Êäû</h2>
    <div class="tag-selector">
      <% selected_tag_ids = Array(@blog.tag_ids).map(&:to_s) %>
      <% @tags.each do |tag| %>
        <label class="tag-option">
          <%= check_box_tag "blog[tag_ids][]", tag.id, selected_tag_ids.include?(tag.id.to_s), class: "hidden-checkbox", id: "tag_#{tag.id}" %>
          <% if tag.image.attached? %>
            <%= image_tag tag.image, class: "tag-image" %>
          <% else %>
            <div class="tag-name"><%= tag.name %></div>
          <% end %>
        </label>
      <% end %>
    </div>

    <!-- Êó•ÊôÇ -->
    <div class="field">
      <%= form.label :start_time, "Date&Time" %>
      <%= form.datetime_select :start_time %>
    </div>

    <!-- Ê∞óÊ∏© -->
    <div class="kion">
      <%= form.label :kion, "Temperature (¬∞C)" %>
      <%= form.text_field :kion, value: @blog.kion, step: 0.1 %>
    </div>

    <!-- „Ç≥„É°„É≥„Éà -->
    <div class="field">
      <%= form.label :content %>
      <%= form.text_field :content, value: @blog.content %>
    </div>

    <!-- ÁîªÂÉè -->
    <div class="field">
      <%= form.label :image %>
      <%= form.file_field :image %>
    </div>

    <!-- ÈÄÅ‰ø°„Éú„Çø„É≥ -->
    <%= form.submit 'ÈÄÅ‰ø°' %>
  <% end %>

  <%= link_to "„Çø„Ç∞„ÇíÁ∑®ÈõÜ", new_tag_path %>
</div>
